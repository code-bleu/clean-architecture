# 20. 업무 규칙

애플리케이션을 업무 규칙과 플러그인으로 구분하려면 업무 규칙이 실제로 무엇인지를 잘 이해해야만 한다. 업무 규칙에는 여러 가지가 있다.

업무 규칙은 사업적으로 수익을 얻거나 비용을 줄일 수 있는 규칙 또는 절차다.

업무 규칙은 사업적으로 수익을 얻거나 비용을 줄일 수 있어야 한다.

핵심 업무 규칙

- 핵심 업무 규칙은 보통 데이터를 요구한다.
- 이에 필요한 데이터는 핵심 업무 데이터가 된다.

핵심 규칙과 핵심 데이터는 본질적으로 결합되어 있기 때문에 객체로 만들 좋은 후보가 된다. 우리는 이러한 유형의 객체를 엔티티라고 하겠다.

### 엔티티

---

컴퓨터 시스템 내부의 객체로서, 핵심 업무 데이터를 기반으로 동작하는 일련의 조그만 핵심 업무 규칙을 구체화한다.

핵심 업무 데이터를 기반으로 동작하는 핵심 업무 규칙을 구현한 함수들로 구성된다.

업무에서 핵심적인 개념을 구현하는 소프트웨어는 한데 모으고, 구축중인 자동화 시스템의 나머지 모든 고려사항과 분리시킨다.

유일한 요구조건은 핵심 업무 데이터와 핵심 업무 규칙을 하나로 묶어서 별도의 소프트웨어 모듈로 만들어야 한다는 것이다.

### 유스케이스

---

유스케이스는 자동화된 시스템이 사용되는 방법을 설명한다. 유스케이스는 사용자가 제공해야 하는 입력, 사용자에게 보여줄 출력, 해당 출력을 생성하기 위한 처리 단계를 기술한다.

엔티티 내의 핵심 업무 규칙과는 반대로, 유스케이스는 애플리케이션에 특화된 업무 규칙을 설명한다.

유스케이스는 엔티티 내부의 핵심 업무 규칙을 어떻게, 그리고 언제 호출할지를 명시하는 규칙을 담는다.

유스케이스는 시스템이 사용자에게 어떻게 보이는지를 설명하지 않는다.

이보다는 애플리케이션에 특화된 규칙을 설명하며, 이를 통해 사용자와 엔티티 사이의 상호작용을 규정한다.

데이터가 들어오고 나가는 방식은 유스케이스와는 무관하다.

유스케이스는 객체다.

유스케이스는 입력 데이터, 출력 데이터, 유스케이스가 상호작용하는 엔티티에 대한 참조 데이터 등의 데이터 요소를 포함한다.

엔티티와 같은 고수준 개념은 유스케이스와 같은 저수준 개념에 대해 아무것도 알지 못한다. 반대로, 저수준인 유스케이스는 고수준인 엔티티에 대해 알고 있다.

유스케이스는 단일 애플리케이션에 특화되어 있다.

엔티티는 수많은 다양한 애플리케이션에서 사용할 수 있도록 일반화된 것이므로, 각 시스템의 입력이나 출력에서 더 멀리 떨어져 있다. 

유스케이스는 엔티티에 의존한다. 반면 엔티티는 유스케이스에 의존하지 않는다.

### 요청 및 응답 모델

---

유스케이스는 입력 데이터를 받아서 출력 데이터를 생성한다.

이처럼 의존성을 제거하는 일은 매우 중요하다.

### 결론

---

업무 규칙은 소프트웨어 시스템이 존재하는 이유다.

업무 규칙은 핵심적인 기능이다.

업무 규칙은 수익을 내고 비용을 줄이는 코드를 수반한다. 업무 규칙은 집안의 가보다.

업무 규칙은 사용자 인터페이스나 데이터베이스와 같은 저수준의 관심사로 인해 오염되어서는 안 되며, 원래 그대로의 모습으로 남아 있어야 한다.

이상적으로는 업무 규칙을 표현하는 코드는 반드시 시스템의 심장부에 위치해야 하며, 덜 중요한 코드는 이 심장부에 플러그인되어야 한다.

업무 규칙은 시스템에서 가장 독립적이며 가장 많이 재사용할 수 있는 코드여야 한다.